<!DOCTYPE html>
<html lang="pt-br">

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Estatísticas | Rokuzen</title>
    <meta name="description" content="Conheça as unidades da Rokuzen." />
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.13.1/font/bootstrap-icons.min.css" />
    <link rel="shortcut icon" href="../assets/Logo/favicon-rokuzen.png" type="image/x-icon" />
    <link rel="stylesheet" href="../CSS/global.css" />
    <link rel="stylesheet" href="../CSS/unidades.css" />
</head>

<body class="unidades-page">
    <header>
        <nav>
            <section class="parte-de-cima">
                <section class="logo">
                    <a href="index.html"><img src="../assets/Logo/logo-rokuzen.png" alt="Logo Rokuzen" /></a>
                </section>

                <a href="autenticacao.html"><i class="bi bi-person"></i></a>

                <ul class="menu-desktop">
                    <li><a href="servicos.html">Serviços</a></li>
                    <li><a href="unidades.html" class="active">Unidades</a></li>
                    <li><a href="artigos.html">Artigos</a></li>
                    <li><a href="profissionais.html">Profissionais</a></li>
                    <li><a href="ajuda.html">Ajuda</a></li>
                    <li><a href="sobre-nos.html">Sobre nós</a></li>
                </ul>
            </section>

            <section class="parte-do-meio">
                <section class="login-btn">
                    <a href="autenticacao.html"><i class="bi bi-person"></i></a>
                </section>

                <section class="menu-btn">
                    <i class="bi bi-list" onclick="menuToggle()"></i>
                </section>

                <ul>
                    <li class="close-btn-li"><i class="bi bi-x close-btn" onclick="menuToggle()"></i></li>
                    <li><a href="servicos.html">Serviços</a></li>
                    <li><a href="unidades.html" class="active">Unidades</a></li>
                    <li><a href="artigos.html">Artigos</a></li>
                    <li><a href="profissionais.html">Profissionais</a></li>
                    <li><a href="ajuda.html">Ajuda</a></li>
                    <li><a href="sobre-nos.html">Sobre nós</a></li>
                </ul>
            </section>

            <section class="parte-de-baixo">
                <section class="barra-de-pesquisa">
                    <input type="text" placeholder="Pesquisar" aria-label="Pesquisar" />
                    <i class="bi bi-search"></i>
                </section>
            </section>
        </nav>
    </header>

    <section class="banner-unidades">
        <h1>ESTATÍSTICAS</h1>
        <img src="../assets/Logo/logo-titulos.png" alt="Marca Rokuzen" />
    </section>

    <main class="unidades-wrapper">
        <canvas id="graficoServicos" width="400" height="200"></canvas>

    </main>

    <footer class="roda-pe">
        <section class="info-rokuzen">
            <p><a href="#">Contato</a></p>
            <p><a href="unidades.html" class="active">Unidade</a></p>
            <p><a href="sobre-nos.html">Sobre nós</a></p>
        </section>

        <section class="redes-sociais">
            <button><a href="https://www.instagram.com/rokuzen.massagem" target="_blank" rel="external"><i
                        class="bi bi-instagram"></i></a></button>
            <button><a href="https://www.facebook.com/rokuzen.massagem" target="_blank" rel="external"><i
                        class="bi bi-facebook"></i></a></button>
            <button><a href="mailto:contato@rokuzen.com.br" target="_blank" rel="noopener noreferrer"><i
                        class="bi bi-envelope"></i></a></button>
        </section>

        <section class="direito-de-imagem">
            <p><i class="bi bi-c-circle"></i> 2025 Rokuzen - Todos os direitos reservados.</p>
        </section>
    </footer>

    <script src="https://vlibras.gov.br/app/vlibras-plugin.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script> new window.VLibras.Widget('https://vlibras.gov.br/app'); </script>
    <script src="../JS/menu-home-page.js"></script>
    <script>

        fetch('http://localhost:3000/grafico')
            .then(res => res.json())
            .then(data => {
                const labels = data.map(item => item.nome_servico);
                const totals = data.map(item => item.total);

                const ctx = document.getElementById('graficoServicos').getContext('2d');
                const chart = new Chart(ctx, {
                    type: 'bar', 
                    data: {
                        labels: labels,
                        datasets: [{
                            label: 'Total de Agendamentos',
                            data: totals,
                            backgroundColor: 'rgba(168, 190, 124, 0.8)',
                            borderColor: 'rgba(128, 128, 128, 0.822)',
                            borderWidth: 1
                        }]
                    },
                    options: {
                        scales: {
                            y: { beginAtZero: true }
                        }
                    }
                });
            });
    </script>
</body>

</html>